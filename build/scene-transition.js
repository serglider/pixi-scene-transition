!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sceneTransition=e():t.sceneTransition=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/build/",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,c=t[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(t,e,n){return(a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&c(i,n.prototype),i}).apply(null,arguments)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function u(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}if(n.r(e),!PIXI)throw new Error("This component does not work without PIXI");PIXI.SceneTransitionManager={init:function(t,e){this._ticker=new PIXI.ticker.Ticker,this._ticker.stop(),this._tweenLibName=e.Tween?"TWEEN":"GSAP","TWEEN"===this._tweenLibName&&this._ticker.add(function(){e.update()}),this._tweenLib=e,this._renderer=t},getRegions:function(t){var e=t.width,n=t.height,r=o(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[1,1],2),i=r[0],a=r[1];if(!i||!a)return[];var c=Math.ceil(n/a),u=Math.ceil(e/i);return Array.from(Array(i*a),function(t,e){var n=e%i*u,r=Math.floor(e/i)*c;return[n,r,u,c]})},createFadeTransition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[0,0,t.width,t.height],c=Object.assign({},{color:0,sprite:null},n),u=Object.assign({},c,i),s=Object.assign({},c,o);u.bounds=s.bounds=a,u.from={alpha:0},s.to={alpha:0};var l=function(t,e,n){var i=t.parent.getChildIndex(t),o=new PIXI.Container;o.visible=!1,t.parent.addChildAt(o,i+1);var a=new PIXI.Graphics;return o.addChild(a),a.lineStyle(0),a.beginFill(n),a.drawRect.apply(a,r(e)),o}(t,a,c.color),f=this.createTransition(t,l,[u]),d=this.createTransition(l,e,[s]);return{start:function(){return f.start().then(function(){return d.start()})}}},createShapeTransition:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[0,0,t.width,t.height],c=Object.assign({},{color:0,sprite:null},n),u=Object.assign({},c,r),s=Object.assign({},c,o);u.bounds=s.bounds=a,u.from={alpha:0},s.to={alpha:0};var l=function(t,e,n){var r=t.parent.getChildIndex(t),o=new PIXI.Container;o.visible=!1,t.parent.addChildAt(o,r+1);var a=new PIXI.Graphics;return o.addChild(a),a.lineStyle(0),a.beginFill(n),a.drawRect.apply(a,i(e)),o}(t,a,c.color),f=this.createTransition(t,l,[u]),d=this.createTransition(l,e,[s]);return{start:function(){return f.start().then(function(){return d.start()})}}},createTransition:function(t,e,n){var r,i,o=this,a=this["_create".concat(this._tweenLibName,"Tween")].bind(this),c=this["_start".concat(this._tweenLibName,"Tween")].bind(this),u=this._getTransitionType(n);u?(r=e,i=t):(r=t,i=e);var s=i.parent.getChildIndex(i),l=new PIXI.Container;i.parent.addChildAt(l,s+1),l.visible=!1,r.visible=!0;var f=n.map(function(t){var e=o._getSprite(r,t.anchor,t.bounds,t.from);return t.from&&(t.to={x:t.bounds[0]+t.bounds[2]*e.anchor.x,y:t.bounds[1]+t.bounds[3]*e.anchor.y,alpha:1,rotation:0,scale:1}),l.addChild(e),a(e,t)});return{start:function(){r.visible=!1,l.visible=!0,i.visible=!0,o._ticker.start();var t=f.map(c);return Promise.all(t).then(function(){return u&&(r.visible=!0,i.visible=!1),o._ticker.stop(),l.destroy(!0),Promise.resolve()})}}},_createGSAPTween:function(t,e){var n=Object.keys(e.to),r=n.reduce(function(n,r){return n[r]="scale"===r?e.from&&"scale"in e.from?e.from.scale:1:t[r],n},{}),i=e.duration/1e3||.5,o=e.delay/1e3||0,a=e.easing||"Linear.easeNone",c=Object.assign({},e.to,{paused:!0,delay:o,ease:a,onUpdate:function(){n.forEach(function(e){"scale"===e?t.scale.set(r[e]):t[e]=r[e]})}});return this._tweenLib.to(r,i,c)},_startGSAPTween:function(t){return new Promise(function(e){t.eventCallback("onComplete",e),t.play()})},_startTWEENTween:function(t){return new Promise(function(e){t.onComplete(e).start()})},_createTWEENTween:function(t,e){var n=Object.keys(e.to),r=n.reduce(function(n,r){return n[r]="scale"===r?e.from&&"scale"in e.from?e.from.scale:1:t[r],n},{}),i=e.delay||0,o=e.duration||500,a=e.easing||this._tweenLib.Easing.Linear.None;return new this._tweenLib.Tween(r).to(e.to,o).onUpdate(function(){n.forEach(function(e){"scale"===e?t.scale.set(r[e]):t[e]=r[e]})}).delay(i).easing(a)},_getSprite:function(t,e,n,r){var i=this._renderer.generateTexture(t,0,1,a(PIXI.Rectangle,u(n))),o=new PIXI.Sprite(i);return e&&o.anchor.set(e),r?Object.keys(r).forEach(function(t){"scale"===t?o.scale.set(r[t]):o[t]=r[t]}):(o.x=n[0]+n[2]*o.anchor.x,o.y=n[1]+n[3]*o.anchor.y),o},_getTransitionType:function(t){return t.every(function(t){return t.from})}}}])});
//# sourceMappingURL=scene-transition.js.map